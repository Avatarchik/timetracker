<div class="container">  
  <div class="edit-account__header">
    <div class="edit-account__title" *ngIf="editingAccount?.name?.length > 0">Edit {{ editingAccount.name || 'unnamed account' }}</div>
  </div>
  <div class="edit-account__content">
    <span class="edit-account__close trec-icon-close" (click)="backToWorkspace()"></span>
    <div class="edit-account__info">
        <div class="edit-account__title">{{version.name}} RELEASE INFORMATION - <span class="new" *ngIf="isNew">NEW!</span></div>
        <div class="edit-account__content">
          <span>PUBLISHED: {{version.published_at | date:"dd-MM-yyyy"}}</span>
          <a class="new" *ngIf="isNew" (click)="openInBrowser(version.html_url)">Download new version</a>
          <p [innerHTML]="version.body | nl2br"></p>
        </div>
    </div>
    <div class="edit-account__form">
        <div class="edit-account__title">EDIT ACCOUNT</div>     
        <button class="btn btn--transparent" type="submit" (click)="goToChangeAccountSettings()">EDIT ACCOUNT SETTINGS</button>  
                   
      </div> 

      <span class="edit-account__title">EDIT PROJECT SETTINGS</span>
      <div class="edit-account__projects" *ngIf="!spinnerService.visible else spinner">
        <div class="edit-account__projects-list" *ngIf="projects?.length != 0 else noProject">
          <div class="edit-account__item" *ngFor="let project of projects">
            <label>{{ project.name }}</label>
            <span class="trec-icon-settings" (click)="editProject(project)"></span>
          </div>
        </div>
        <ng-template #noProject>
          <div class="edit-account__no-boards">No projects found.</div>  
        </ng-template>
      </div>
      <span class="edit-account__title">SELECT BOARDS</span>
      <div class="edit-account__boards" *ngIf="!spinnerService.visible else spinner">
        <div class="edit-account__boards-list" *ngIf="boards?.length != 0 else noBoards">
          <div class="edit-account__item" *ngFor="let board of boards">
            <input type="checkbox" [(ngModel)]="board.isChecked" name="checked">
            <label>{{ board.name }}</label>
          </div>
        </div>
        <ng-template #noBoards>
          <div class="edit-account__no-boards">No boards found. It looks like you need to create agile board or your sprint is not scheduled correctly.</div>  
        </ng-template>
        <div class="edit-account__save-changes">
          <button class="btn btn--red" type=”submit” (click)="saveChanges(editingAccount)">SAVE CHANGES</button>        
        </div>
      </div>
      <div class="edit-account__actions">
          <button class="edit-account__remove btn btn--transparent" type=”submit” (click)="showModal('Do you really want to DELETE THIS ACCOUNT?', 'remove-account')">
            <span class="trec-icon-remove"></span>
            REMOVE ACCOUNT
          </button>
      </div>
      <div class="edit-account__reset">
        <div class="edit-account__title">T-REC MEMORY</div>
        <button class="btn btn--transparent" (click)="showModal('Do you really want to RESET T-REC? 
        Your local records, selected boards will be deleted. Only accounts will remain in the T-REC\'s memory. 
        Your data in YouTrack will not be changed!', 'reset-application')">RESET APPLICATION</button>
      </div>
      <ng-template #spinner>
        <div class="edit-account__boards loading-container">
          <app-loading-spinner></app-loading-spinner>
        </div>
      </ng-template>
  </div>
</div>
<div id="modal">
  <div class="modal__backdrop" (click)="hideModal()"></div>
  <div class="modal__content">
    <div class="modal__text">
      <span>{{ modalText }}</span>
    </div>
    <div class="modal__interaction">
      <button class="btn btn--transparent" (click)="hideModal()">No</button>
      <button *ngIf="modalType === 'remove-account' else resetApp" class="btn btn--transparent" (click)="removeAccount(editingAccount.id)">
        <span class="trec-icon-remove"></span>Yes
      </button>
      <ng-template #resetApp>
        <button class="btn btn--transparent" (click)="resetApplication()">
          <span class="trec-icon-remove"></span>RESET
        </button>
      </ng-template>
    </div>
  </div>
</div>